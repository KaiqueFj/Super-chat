extends base

block append head
  link(rel="stylesheet", href="/styles/overview/styles.css")

  script(src="https://code.jquery.com/jquery-3.6.4.min.js")
  script.
    const socket = io();
    var userLoggedInId = "#{user.id}"; // Pass user ID to client-side JavaScript


block content
  main.main

    .leftMenu
      .listUser
        - const loggedInUserID = user.id // Assuming you have a function to get the logged-in user's ID

        each user in users
          - if (loggedInUserID !== user.id )
            .users(data-user-room=user.id) 
              img.user-img(src=`/images/user/${user.photo}`, alt=`Photo of ${user.name}`)
              span.userName= user.name 
              if user.messages && user.messages.length > 0
                - const lastMessage = user.messages.sort((a, b) => b.createdAt - a.createdAt)[0]
                span.userMessage= lastMessage.message
                - const formattedTime = lastMessage.createdAt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                span.messageTime= formattedTime

    .messageFormContainer


      .messagesContainer
        .messageList


      .form
        form.form-input(action="")
          .inputBox
            input.inputMessage(placeholder="Message")
            button(type="submit")
              i.fa-regular.fa-paper-plane
